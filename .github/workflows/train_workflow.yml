name: Run Notebook on OpenTofu

on:
  push:
    branches:
      - main
    paths:
      - '**/script_notebook_modelisation.ipynb'

jobs:
  run-notebook:
    runs-on: self-hosted

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Apply OpenTofu deployment
        run: |
          cd /home/samuel/dev/ingenieuria/projet7/iac  # adapter Ã  votre organisation sur la machine runner
          tofu apply -auto-approve

      - name: Execute Jupyter Notebook
        run: |
          docker exec ml_training jupyter run /root/work/script_notebook_modelisation.ipynb
